---
title: 汇编学习-第十二章
date: 2021-09-23 17:19:57
tags:
categories:
- 汇编
---

# 内中断的产生
任何一个通用的CPU，都具备一种能力，可以在执行完当前正在执行的指令之后，检测到从CPU外部发送过来的或内部产生的一种特殊信息，并且可以立即对所接收到的信息进行处理。这种特殊的信息，我们可以称其为：中断信息。中断的意思是指，CPU不再接着（刚执行完的指令）向下执行，而是转去处理这个特殊信息。

中断信息可以来自CPU的内部和外部（内中断，外中断）

内中断：当CPU的内部有需要处理的事情发生的时候，将产生中断信息，引发中断过程。这种中断信息来自CPU的内部

8086CPU的内中断（下面四种情况将产生中断信息）

除法错误，比如，执行div指令产生的除法溢出；
* 单步执行；
* 执行 into指令；
* 执行 int指令。
中断信息中包含中断类型码，中断类型码为一个字节型数据，可以表示256种中断信息的来源（中断源）

上述的4种中断源，在8086CPU中的中断类型码如下。

* 除法错误：0
* 单步执行：1
* 执行into指令：4
* 执行int指令，该指令的格式为int n，指令中的n为字节型立即数，是提供给CPU的中断类型码。

# 中断处理程序

*中断处理程序*

用来处理中断信息的程序被称为中断处理程序。

根据CPU的设计，中断类型码的作用就是用来定位中断处理程序。比如CPU根据中断类型码4，就可以找到4号中断的处理程序。

*中断向量表*

中断向量就是中断处理程序的入口地址。中断向量表就是中断处理程序入口地址的列表

CPU用8位的中断类型码通过中断向量表找到相应的中断处理程序的入口地址

![](20210928173450.jpg)

* 中断向量表在内存中放置，从内0000:0000 到 0000:03ff的1024个单元
* 在中断向量表中，一个表项存放一个中断向量，也就是一个中断处理程序的入口地址。 这个入口地址包括段地址和偏移地址。 一个表项占用两个**字**。高地址存放段地址，低地址存放偏移地址

# 检测12.1 

1. 判断入口地址

注意： 一项表项占用两个字，4个字节。
![](20210928175459.png)

一项表项占用两个字，4个字节。

1. 通过以上的图解 不难发现
   1. 存储N号中断源对应的中断处理程序入口的*偏移地址*的内存单元的地址为： 4N
   2. 存储N号中断源对应的中断处理程序入口的*段地址*的内存单元的地址为：4N+2


补充： 8086系统把中断向量表中的中断明确分为3个部份：

1. 专用中断：类型号0~4（所以中断不是从1开始，而是0）
2. 系统备用中断：类型号5~31H
3. 用户中断：类型号32H~0FFH

# 