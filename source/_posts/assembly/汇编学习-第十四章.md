---
title: 汇编学习-第十四章
date: 2021-09-29 15:40:33
tags:
categories:
- 汇编
---

在PC机系统中，和CPU通过总线相连的芯片除各种存储器外，还有以下3种芯片。

* 各种接口卡（比如，网卡、显卡）上的接口芯片，它们控制接口卡进行工作；
* 主板上的接口芯片，CPU通过它们对部分外设进行访问；
* 其他芯片，用来存储相关的系统信息，或进行相关的输入输出处理。

在这些芯片中，都有一组可以由CPU读写的寄存器。这些寄存器，它们在物理上可能处于不同的芯片中，
但是它们在以下两点上相同。

* 都和CPU的总线相连，这种连接是通过它们所在的芯片进行的；
* CPU对它们进行读或写的时候都通过控制线向它们所在的芯片发出端口读写命令。

从CPU的角度，将这些寄存器都当作端口，对它们进行统一编址，从而建立了一个统一的端口地址空间。
每一个端口在地址空间中都有一个地址。在访问端口的时候，CPU通过端口地址来定位端口。因为端口所在的芯片和CPU通过总线相连，

CPU可以直接读写以下3个地方的数据。

* CPU内部的寄存器；
* 内存单元；
* 端口。

# 端口的读写
端口地址和内存地址一样，通过地址总线来传送。在PC系统中，CPU最多可以定位64KB个不同的端口。则端口地址的范围为0-65535。

端口的读写指令只有两条：in和out，分别用于从端口读取数据和往端口写入数据。

在in和out指令中，只能使用ax或al来存放从端口中读入的数据或要发送到端口中的数据。

注意： 在in和out指令中，只能使用ax或al来存放从端口中读入的数据或要发送到端口的数据，访问8位端口时用al,访问16端口时哟经ax

## CMOS RAM芯片
PC机中，有一个CMOS RAM芯片，一般简称为CMOS。此芯片的特征如下

* 包含一个实时钟和一个有128个存储单元的RAM存储器
* 该芯片靠电池供电。关机后内部的实时钟正常工作，RAM中的信息不丢失
* 128个字节的RAM中，内部实时钟占用0~0dh单元来保存时间信息，其余大部分单元用于保存系统配置信息，供系统启动时BIOS程序读取。BIOS也提供了相关的程序，使我们可以在开机的时候配置CMOS RAM中的系统信息。
* 该芯片内部有两个端口，端口地址为70h和71h。CPU通过这两个端口来读写CMOS RAM
* 70h为地址端口，存放要访问的CMOS RAM单元的地址；71h为数据端口，存放从选定的CMOS RAM单元中读取的数据，或要写入到其中的数据。

可见，CPU对CMOS RAM的读写分两步进行，比如，读CMOS RAM的2号单元：
* 将2送入端口70h；
* 从端口71h读出2号单元的内容。
