---
title: 线程
date: 2022-01-26 14:09:49
tags:
categories:
- 操作系统
---
# 执行流
> 在本节我们只考虑单核

过去，计算机只有 1 个处理器 ，任务的执行都是串行的，一个任务彻底执行完成后才能开始下一个任务。

多道程序设计的方式，使处理器在所有任务之间来回切换，这样就给用户一种所有任务并行运行的错觉，这称为“伪并行”

![](20220129195738.jpg)

任务调度器来实现伪并行。

任务调度器就是操作系统中用于把任务轮流调度上处理器运行的一个软件模块，它是操作系统的一部分。

调度器在内核中维护一个任务表（也称进程表、线程表或调度表） ，然后按照一定的算法， 从任务表中选择一个任务，然后把该任务放到处理器上运行，当任务运行的时间片到期后，再从任务表中找另外一个任务放到处理器上运行，周而复始，让任务表中的所有任务都有机会运行。

# 多任务弊端

对于所有任务来说，在不考虑阻塞的情况下，无论是在哪种系统上，它们“自身指令”总共的执行时间之和应该是一致的。但是，在多任务系统中，任务切换是软件完成的，切换工作本身必然要消耗处理器周期，因此所有任务的总共执行时间反而更长了，如图 9-2 所示，四个任务：A、B、C、D 执行的总时间， 在多任务操作系统上的时间更长，其中右图中虚线的部分是任务切换的时间成本。