---
title: c特殊符号
date: 2022-01-20 21:01:30
tags:
categories:
- c语言
---

# <<、>>、&、|，~
在以后的开发中 会经常用到这些符号，要了解实际的用途。使用这些数据的时候，常常和”字节“有关系。 ”按位“ 这两个字体会一下


|  运算符   | 含义  | 描述|
|  ----  | ----  |----|
| <<  | 左移 |   用来将一个数的各二进制位全部左移N位，高位舍弃，低位补0|
| >>  | 右移 |   将一个数的各二进制位右移N位，移到右端的低位被舍弃，对于无符号数，高位补0。|
| &  | 按位与 |   如果两个相应的二进制位都为1，则该位的结果值为1，否则为0。|
| \|  | 按位或 |   两个相应的二进制位中只要有一个为1，该位的结果值为1，否则为0。|
| \~  | 按位取反 |   表示按位取反 1变为0，0变为1|



# 二、用途

按位与的用途

1. 清零
若想对一个存储单元清零，即使其全部二进制位为0，只要对这个存储单元当前的值取反(也就是原来的数中为1变为0，0变为1），然后使二者进行&运算，即可达到清零目的。
比如a=23,b=~a;

```c
a:00010111
b:11101000
a&b:00000000
```
2. 取一个数中某些指定位

比如a=23，我想取a的二进制的后面4位数，那么可以找一个后4位是1,其余位是0的数b，即b=0x0f(十六进制，转换为二进制为00001111)，a&b就得到了a的后四位。

```c
a:00010111
b:00001111
a&b:00000111
```

3. 保留指定位
比如a=23(用8bit表示)，我想保留其二进制的第4和第6位(最左边为第1位)，其余位置0。那么可以找一个第4和第6位是1其余位是0的数b与a进行按位与运算
```c
a:00010111
b:00010100
a&b:00010100
```

4. 按位或的用途
常用来对一个数的某些位置1，其余位不变。比如a=23，我想将其第2和第3位置为1，可以找一个第2、3位是1其余位是0的数与a进行按位或运算。

```c
a:00010111
b:01100000
a|b:01110111
```

5. 左移和按位与

取一个数中某个指定位第n位，就需要将1左移n-1位,然后进行按位与,就可以保留该位置的数。 比如我们保留23的第5位。
```c
1<<4; a:16
b: 00010111
a&b:00010000
```

用4个byte来表示一个日期，其中byte0表示年份的高位数，byte1表示年份的低位数，byte2表示月份，byte3表示日期。
设备端现在收到另外一台设备传过来的日期数据`00010100 00010011 00000110 00011101`

5. 右移和按位与

```c 
/* 
*第一步，获取日期。
*日期是最后一个byte，也就是最后8位，用一个后8位是1其余位是0的数(11111111,十六进制表示是0xff)与数据进行按位与计算即可
*/
date = 00010100 00010011 00000110 00011101;（0x1413061d）
day = date & 0xff;(计算结果是00011101，十进制表示是29，也就是日期是29)。

/* 
*第二步，获取月份。
*月份是倒数第2个byte，此时需要先将最后一个byte砍掉(也就是右移8位)，然后再和0xff进行按位与运算
*下面代码可以简写成date=date>>8&0xff;
*/
date = date>>8; (计算结果是00010100 00010011 00000110)
month = date & 0xff;(计算结果是00000110，十进制表示是6，也就是月份是6月)。

/* 
*第三步，获取年份低位。
*先将最后一个byte砍掉(也就是右移8位)，然后再和0xff进行按位与运算
*下面代码可以简写成date=date>>8&0xff;
*/
date = date>>16; (计算结果是00010100 00010011)
year_low = date & 0xff;(计算结果是00010011，十进制表示是19)。

/* 
*第四步，获取年份高位。
*先将最后一个byte砍掉(也就是右移8位)，然后再和0xff进行按位与运算
*下面代码可以简写成date=date>>8&0xff;
*/
date = date>>24; (计算结果是00010100)
year_heigh = date & 0xff;(计算结果是00010011，十进制表示是20)。
```

6. 字节指定位置数值为1
 
 将23的3位值为1
 采用左移和按位与的操作
```c
a:23(00010111)
b:1(00000001) 左移3位 00001000
a|b: 00010111|00001000 = 00011111
用c 语言表示 a |= (1<3)
```

7. 字节指定位置为0
 将23的4位值为0
 采用左移和取反 和按位与的操作
```c
a:23(00010111)
b:1(00000001) 左移4位 00010000 在取反11101111
a&b: 00010111|11101111 = 00010111
用c 语言表示 a&= ~(1<4)
```

### 参考[C语言中<<、>>、&、|的实际用途](https://www.jianshu.com/p/eae8da7caac6)

