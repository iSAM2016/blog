---
title: c和指针-指针
date: 2021-10-26 17:48:21
tags:
categories:
- c语言
---

如果能把汇编学了，就能更好理解指针了。

指针变量就是一个其值为另外一个内存地址的变量。比较官网的说法。

每个人有固定的省份证号，代表是你自己，这是绝对的标识。但是我们用名字来代理你自己 这是逻辑标识

每个电脑网络有唯一的mac 地址，是绝对地址.但是我们使用IP地址进行通信。这是逻辑地址

一栋楼的房间有固定的经纬，高度坐标。这是绝对地址，但是我们使用省市区，街道小区，门牌号来表示房间地址，这是逻辑地址

数据是存储在内存中的，我们知道找到内存的绝对地址（0x00000001），就能找到存储在其中的值。 但是我们不可能使用这个绝对地址的。

`char *message ="hello w";`

这条语句是把message声明为一个指向字符串的指针。相当于两步
```
char *message; 声明
message="hello w";
```
# 内存和地址 


![](20211026195913.jpg)

我们使用符号，代替的内存地址。进行如下操作，变量d和e的声明，他们都被声明为了指针。注意是a和e是指针，不是\*e和\*a. **指针也是变量，变量在等号的左边是赋值操作，右边是取值操作。**
```c
int a = 112, b=-1;
float c = 3.14;
int *d = &a; d为100
float *e = &c; e为108
```
指针的初始化是用&操作完成的，用于产生操作的内存地址

变量d和e的声明，他们被声明为指针，并记录了其他内存的地址。

d存储是a的地址，e存储的是c的地址，变量d的地址是112，他的内容是100。我们看到数字100 也用于第一个内存块的地址

通过一个指针访问它所指向的地址的过程称为间接访问，使用单目操作符号* (通过逻辑地址来访问内容)
![](20211026203414.jpg)

看到倒数第二行的*d是不是蒙了 哈哈

在刚在`int *d = &a; d为100`

*d被声明为一个指针，将a的地址100存入d,并且这个指针指向的内存数据是int类型，并不是\*d是int类型，也不是d是int类型。 也就解释了`float *e = &c` 这个语句谁是float类型。是c下的数据是float。  

此时，d的类型是指针，d的值是地址100。 

此时 再一次使用\*即*d,对指针进行间接访问，访问的就是内存的值。前边已经提到 `int *d `中的int 代表的 d地址下的数据是int 类型，访问到的数据是112， 同理\*e访问的就是float数据类型.

# 指针，间接访问和左值

书中介绍的让我头晕。 我们可以记忆， 指针也是变量，变量在等号的左边是赋值操作，右边是取值操作。

我们看一下 `*d = 112 - *d`

1. 右边的*d是获取位置d(100)的内存值是112， 112-112=0
2. 左边 给*d的赋值，d存储的是0

```c
#include <stdio.h>

int main()
{
    int a = 112, b = -1;
    float c = 3.14;
    int *d = &a;
    float *e = &c;
    long f = 0xffffffffffff;
    /* 我的第一个 C 程序 */
    printf("*d获取地址内存中的数据: %d\n", *d);
    *d = *d - 0;
    printf("指针（地址）的值为：%p\n", d);
    printf("*d获取地址内存中的数据: %d\n", *d);
    return 0;
}
```

```shell
*d获取地址内存中的数据: 112
指针（地址）的值为：0x7ffee5cf3528
*d获取地址内存中的数据: 112
```

# 指针的指针